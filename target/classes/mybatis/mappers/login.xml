<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="mapper.login">

	<select id="loginTry" parameterType="userVO" resultType="String">
		<![CDATA[
         SELECT DECODE(count(*), 1, 'true' , 'false') as result FROM USER_TBL WHERE user_id = #{user_id} AND password = #{password} AND cancel = 0
      ]]>
	</select>
	
	<select id="findUserById" parameterType="String" resultType="userVO">
		<![CDATA[
         SELECT * FROM USER_TBL WHERE user_id = #{user_id}
      ]]>
	</select>
	
	<select id="findId" parameterType="userVO" resultType="String">
		<![CDATA[
         SELECT user_id FROM USER_TBL WHERE user_name = #{user_name} AND email = #{email}  AND cancel = 0
      ]]>
	</select>
	
	<select id="resetPasswordCheck" parameterType="userVO" resultType="String">
		<![CDATA[
         SELECT DECODE(count(*), 1, 'true' , 'false') as result FROM USER_TBL WHERE user_id = #{user_id} AND user_name = #{user_name} AND email = #{email}  AND cancel = 0
      ]]>
	</select>

	<update id="resetPassword" parameterType="userVO">
		<![CDATA[
         UPDATE USER_TBL SET password = #{password} WHERE user_id = #{user_id}  AND cancel = 0
      ]]>
	</update>

</mapper>